<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#4c0004">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="MP Planner">
  <title>Mourning Person ‚Äî Planner</title>
  <link rel="manifest" href="manifest.json">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@600;700;800&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>

  <!-- Login screen -->
  <div id="login-screen" class="login-screen">
    <div class="login-content">
      <p class="login-label">Mourning Person</p>
      <h1 class="login-title">Editorial Planner</h1>
      <p class="login-sub">Your private space to plan, write, and grow.</p>
      <button id="login-btn" class="btn-login">
        <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
          <path d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
          <path d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
          <path d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
          <path d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
        </svg>
        Sign in with Google
      </button>
    </div>
  </div>

  <!-- App -->
  <div id="app-content" class="app-content" style="display: none;">

    <header class="main-header">
      <div class="header-inner">
        <div class="header-brand">
          <span class="header-label">Mourning Person</span>
          <h1 class="header-title">Editorial Planner</h1>
        </div>
        <div id="user-info" class="user-info">
          <img id="user-avatar" class="user-avatar" src="" alt="">
          <button id="sign-out-btn" class="btn-sign-out">Sign out</button>
        </div>
      </div>
      <nav class="main-nav">
        <button class="nav-btn active" data-tab="ideas">Ideas</button>
        <button class="nav-btn" data-tab="calendar">Calendar</button>
        <button class="nav-btn" data-tab="trending">Trending</button>
        <button class="nav-btn" data-tab="promote">Promote</button>
      </nav>
    </header>

    <main class="container">

      <!-- IDEAS TAB -->
      <section id="ideas-tab" class="tab-content active">
        <div class="tab-header">
          <div class="tab-header-left">
            <h2>Ideas</h2>
            <div class="idea-counts">
              <span id="count-idea" class="count-chip chip-idea">0 ideas</span>
              <span id="count-drafting" class="count-chip chip-drafting">0 drafting</span>
              <span id="count-ready" class="count-chip chip-ready">0 ready</span>
              <span id="count-published" class="count-chip chip-published">0 published</span>
            </div>
          </div>
          <button id="new-idea-btn" class="btn-primary">+ New Idea</button>
        </div>

        <div class="filters-row">
          <select id="status-filter" class="filter-select">
            <option value="all">All Statuses</option>
            <option value="idea">üí° Idea</option>
            <option value="drafting">‚úçÔ∏è Drafting</option>
            <option value="ready">‚úÖ Ready</option>
            <option value="published">üì¨ Published</option>
          </select>
          <select id="theme-filter" class="filter-select">
            <option value="all">All Themes</option>
            <option value="grief">Grief</option>
            <option value="practical">Practical</option>
            <option value="personal">Personal</option>
            <option value="timely">Timely</option>
            <option value="community">Community</option>
            <option value="resources">Resources</option>
          </select>
          <input type="text" id="search-ideas" class="filter-search" placeholder="Search ideas...">
        </div>

        <div class="ideas-grid" id="ideas-grid">
          <!-- populated by JS -->
        </div>
      </section>

      <!-- CALENDAR TAB -->
      <section id="calendar-tab" class="tab-content">
        <div class="tab-header">
          <div class="tab-header-left">
            <button id="cal-prev" class="cal-nav-btn">‚Äπ</button>
            <h2 id="cal-month-title">Month Year</h2>
            <button id="cal-next" class="cal-nav-btn">‚Ä∫</button>
          </div>
          <button id="cal-today-btn" class="btn-secondary">Today</button>
        </div>

        <div class="calendar-grid" id="calendar-grid">
          <!-- populated by JS -->
        </div>

        <div class="cal-upcoming">
          <h3>Upcoming</h3>
          <div id="cal-upcoming-list" class="upcoming-list">
            <!-- populated by JS -->
          </div>
        </div>
      </section>

      <!-- TRENDING TAB -->
      <section id="trending-tab" class="tab-content">
        <div class="tab-header">
          <h2>Trending</h2>
        </div>

        <div class="trending-links">
          <h3>Substack Discovery</h3>
          <div class="link-cards">
            <a href="https://substack.com/discover" target="_blank" class="link-card">
              <span class="link-card-icon">üîç</span>
              <div>
                <div class="link-card-title">Discover</div>
                <div class="link-card-sub">Browse trending publications</div>
              </div>
            </a>
            <a href="https://substack.com/notes" target="_blank" class="link-card">
              <span class="link-card-icon">üìù</span>
              <div>
                <div class="link-card-title">Notes</div>
                <div class="link-card-sub">See what's being shared right now</div>
              </div>
            </a>
            <a href="https://substack.com/inbox" target="_blank" class="link-card">
              <span class="link-card-icon">üì¨</span>
              <div>
                <div class="link-card-title">Inbox</div>
                <div class="link-card-sub">See what other writers are publishing</div>
              </div>
            </a>
            <a href="https://mourningperson.substack.com/dashboard" target="_blank" class="link-card">
              <span class="link-card-icon">üìä</span>
              <div>
                <div class="link-card-title">Your Dashboard</div>
                <div class="link-card-sub">Stats, subscribers, growth</div>
              </div>
            </a>
          </div>
        </div>

        <div class="trending-notes-section">
          <div class="section-header-row">
            <h3>What I'm Noticing</h3>
            <span class="autosave-label" id="trending-saved"></span>
          </div>
          <p class="section-hint">Jot down trends, recurring grief topics, things resonating on social, angles worth exploring.</p>
          <textarea id="trending-notes" class="big-textarea" placeholder="e.g. People responding a lot to 'permission' framing ‚Äî giving people permission to grieve publicly. Also seeing anniversary content trending around holidays..."></textarea>
        </div>

        <div class="trending-notes-section">
          <div class="section-header-row">
            <h3>Recurring Themes to Revisit</h3>
          </div>
          <div class="theme-chips">
            <span class="theme-chip">First anniversaries</span>
            <span class="theme-chip">Grief in the body</span>
            <span class="theme-chip">Grief & identity</span>
            <span class="theme-chip">Supporting others</span>
            <span class="theme-chip">Grief timelines</span>
            <span class="theme-chip">Holiday grief</span>
            <span class="theme-chip">Unexpected triggers</span>
            <span class="theme-chip">Grief & joy coexisting</span>
            <span class="theme-chip">Letters to the lost</span>
            <span class="theme-chip">The language of loss</span>
          </div>
        </div>
      </section>

      <!-- PROMOTE TAB -->
      <section id="promote-tab" class="tab-content">
        <div class="tab-header">
          <h2>Promote</h2>
        </div>

        <div class="promote-section">
          <h3>Post-Publish Checklist</h3>
          <p class="section-hint">Run through this every time you publish.</p>
          <div class="checklist" id="publish-checklist">
            <label class="check-item"><input type="checkbox"> Share to Notes on Substack</label>
            <label class="check-item"><input type="checkbox"> Post to Instagram Stories</label>
            <label class="check-item"><input type="checkbox"> Share excerpt to Instagram feed</label>
            <label class="check-item"><input type="checkbox"> Post to X / Twitter</label>
            <label class="check-item"><input type="checkbox"> Share in relevant Facebook grief groups</label>
            <label class="check-item"><input type="checkbox"> Pin to top of profile if strong piece</label>
            <label class="check-item"><input type="checkbox"> Send to 2‚Äì3 people personally who might relate</label>
          </div>
        </div>

        <div class="promote-section">
          <h3>Growth Strategies</h3>
          <div class="strategy-cards">
            <div class="strategy-card">
              <div class="strategy-icon">ü§ù</div>
              <div class="strategy-title">Cross-Promotions</div>
              <div class="strategy-body">Recommend other grief/mental health writers on Substack. They may reciprocate. Use the Recommendations feature in your settings.</div>
            </div>
            <div class="strategy-card">
              <div class="strategy-icon">üìñ</div>
              <div class="strategy-title">Substack Notes</div>
              <div class="strategy-body">Post 2‚Äì3x per week on Notes ‚Äî excerpts, grief quotes, honest one-liners. Notes are the main discovery surface right now.</div>
            </div>
            <div class="strategy-card">
              <div class="strategy-icon">üîÅ</div>
              <div class="strategy-title">Restacks</div>
              <div class="strategy-body">Restack posts from writers you admire with a genuine comment. This gets you seen by their audience.</div>
            </div>
            <div class="strategy-card">
              <div class="strategy-icon">üí¨</div>
              <div class="strategy-title">Engage in Comments</div>
              <div class="strategy-body">Reply to every comment on your posts. Leave thoughtful comments on other grief writers' posts ‚Äî your name becomes familiar.</div>
            </div>
            <div class="strategy-card">
              <div class="strategy-icon">üéÅ</div>
              <div class="strategy-title">Gift Subscriptions</div>
              <div class="strategy-body">Send gift subscriptions to therapists, hospice workers, or grief counselors who might share it with clients.</div>
            </div>
            <div class="strategy-card">
              <div class="strategy-icon">üîó</div>
              <div class="strategy-title">Link in Bio</div>
              <div class="strategy-body">Keep your Substack link prominent in all social bios. Instagram, X, LinkedIn. Use a Linktree if needed.</div>
            </div>
          </div>
        </div>

        <div class="promote-section">
          <div class="section-header-row">
            <h3>My Notes on Promotion</h3>
            <span class="autosave-label" id="promote-saved"></span>
          </div>
          <textarea id="promote-notes" class="big-textarea" placeholder="Track what's working, communities to try, people to reach out to, ideas for collabs..."></textarea>
        </div>
      </section>

    </main>
  </div>

  <!-- Idea Modal -->
  <div class="modal" id="idea-modal">
    <div class="modal-content">
      <button class="modal-close" id="modal-close-btn">&times;</button>

      <div class="modal-header">
        <input type="text" id="modal-title" class="modal-title-input" placeholder="What's the idea?">
      </div>

      <div class="modal-body">
        <div class="modal-row">
          <div class="modal-field">
            <label>Status</label>
            <select id="modal-status" class="modal-select">
              <option value="idea">üí° Idea</option>
              <option value="drafting">‚úçÔ∏è Drafting</option>
              <option value="ready">‚úÖ Ready</option>
              <option value="published">üì¨ Published</option>
            </select>
          </div>
          <div class="modal-field">
            <label>Publish Date</label>
            <input type="date" id="modal-date" class="modal-input">
          </div>
        </div>

        <div class="modal-field">
          <label>Themes</label>
          <div class="theme-checkboxes" id="theme-checkboxes">
            <label class="theme-check"><input type="checkbox" value="grief"> Grief</label>
            <label class="theme-check"><input type="checkbox" value="practical"> Practical</label>
            <label class="theme-check"><input type="checkbox" value="personal"> Personal</label>
            <label class="theme-check"><input type="checkbox" value="timely"> Timely</label>
            <label class="theme-check"><input type="checkbox" value="community"> Community</label>
            <label class="theme-check"><input type="checkbox" value="resources"> Resources</label>
          </div>
        </div>

        <div class="modal-field">
          <label>Notes</label>
          <textarea id="modal-notes" class="modal-textarea" placeholder="Angle, hook, personal connection, related pieces, research needed..."></textarea>
        </div>

        <div class="modal-field">
          <label>Substack Link <span class="field-hint">(once published)</span></label>
          <input type="url" id="modal-link" class="modal-input" placeholder="https://mourningperson.substack.com/p/...">
        </div>
      </div>

      <div class="modal-footer">
        <button id="modal-delete-btn" class="btn-delete" style="display:none;">Delete</button>
        <div class="modal-footer-right">
          <button id="modal-cancel-btn" class="btn-secondary">Cancel</button>
          <button id="modal-save-btn" class="btn-primary">Save Idea</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Calendar Day Modal -->
  <div class="modal" id="cal-modal">
    <div class="modal-content modal-content-sm">
      <button class="modal-close" id="cal-modal-close">&times;</button>
      <div class="modal-header">
        <h3 id="cal-modal-date-title">Date</h3>
      </div>
      <div class="modal-body">
        <p class="cal-modal-hint">Assign an idea to this date:</p>
        <select id="cal-modal-idea-select" class="modal-select">
          <option value="">‚Äî unscheduled ideas ‚Äî</option>
        </select>
      </div>
      <div class="modal-footer">
        <div class="modal-footer-right">
          <button id="cal-modal-cancel" class="btn-secondary">Cancel</button>
          <button id="cal-modal-assign" class="btn-primary">Assign</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="firebase-config.js"></script>
  <script type="module" src="app.js"></script>
</body>
</html>
